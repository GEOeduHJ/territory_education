var P=Object.defineProperty;var T=(s,t,r)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var N=(s,t,r)=>(T(s,typeof t!="symbol"?t+"":t,r),r);import{r as m,a as O,u as I,b as V,B as D,R as B,c as k,d as F}from"./vendor-0b034835.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var K={exports:{}},v={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z=m,U=Symbol.for("react.element"),H=Symbol.for("react.fragment"),W=Object.prototype.hasOwnProperty,Y=z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};function M(s,t,r){var l,n={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(l in t)W.call(t,l)&&!X.hasOwnProperty(l)&&(n[l]=t[l]);if(s&&s.defaultProps)for(l in t=s.defaultProps,t)n[l]===void 0&&(n[l]=t[l]);return{$$typeof:U,type:s,key:a,ref:o,props:n,_owner:Y.current}}v.Fragment=H;v.jsx=M;v.jsxs=M;K.exports=v;var e=K.exports,E={},R=O;E.createRoot=R.createRoot,E.hydrateRoot=R.hydrateRoot;const q=({module:s,onClick:t})=>e.jsxs("div",{className:"module-card",onClick:t,role:"button",tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&t()},"data-testid":`module-card-${s.id}`,children:[e.jsx("div",{className:"w-full h-32 bg-gradient-to-r from-territory-primary to-territory-secondary rounded-lg mb-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-2xl font-bold",children:["모듈 ",s.id]})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[s.stepCount,"개 단계"]}),e.jsxs("div",{className:"flex items-center text-territory-primary",children:[e.jsx("span",{className:"text-sm font-medium",children:"시작하기"}),e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),G="modulepreload",J=function(s){return"/"+s},_={},C=function(t,r,l){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=J(a),a in _)return;_[a]=!0;const o=a.endsWith(".css"),x=o?'[rel="stylesheet"]':"";if(!!l)for(let g=n.length-1;g>=0;g--){const b=n[g];if(b.href===a&&(!o||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${x}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":G,o||(i.as="script",i.crossOrigin=""),i.href=a,document.head.appendChild(i),o)return new Promise((g,b)=>{i.addEventListener("load",g),i.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};class Q{validateUrl(t){try{return new URL(t),!0}catch{return!1}}trackLinkClick(t,r,l){console.log(`Link clicked: Module ${t}, Step ${r} -> ${l}`)}openExternalLink(t,r=!0){if(!this.validateUrl(t)){console.error("Invalid URL:",t),alert("여기를 수정하세요 - 잘못된 링크입니다.");return}r?window.open(t,"_blank","noopener,noreferrer"):window.location.href=t}}const $=new Q;class Z{async loadModuleData(t){const{loadModule:r}=await C(()=>import("./index-549a1e6b.js"),["assets/index-549a1e6b.js","assets/vendor-0b034835.js"]);return await r(t)}async loadAllModules(){const{loadAllModules:t}=await C(()=>import("./index-549a1e6b.js"),["assets/index-549a1e6b.js","assets/vendor-0b034835.js"]);return await t()}}const A=new Z,ee=()=>{const[s,t]=m.useState([]),[r,l]=m.useState(!0),[n,a]=m.useState(null),o=I();m.useEffect(()=>{(async()=>{try{l(!0);const i=await A.loadAllModules();t(i)}catch(i){a(i instanceof Error?i.message:"모듈을 불러오는 중 오류가 발생했습니다.")}finally{l(!1)}})()},[]);const x=h=>{o(`/module/${h}`)};return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-territory-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"모듈을 불러오는 중..."})]})}):n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-xl mb-4",children:"오류 발생"}),e.jsx("p",{className:"text-gray-600",children:n})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"여기를 수정하세요 - 영토교육 학습 플랫폼"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"여기를 수정하세요 - 체계적인 영토교육을 통해 우리나라의 영토에 대한 올바른 이해를 높여보세요. 각 모듈은 단계별 학습 과정으로 구성되어 있습니다."})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"학습 모듈 선택"}),e.jsx("p",{className:"text-gray-600",children:"여기를 수정하세요 - 아래 모듈 중 하나를 선택하여 학습을 시작하세요."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(h=>e.jsx(q,{module:h,onClick:()=>x(h.id)},h.id))}),e.jsx("div",{className:"mt-16 text-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"여기를 수정하세요 - 학습 방법 안내"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"여기를 수정하세요 - 각 모듈을 클릭하면 단계별 탭 구조로 이동합니다. 각 단계에서 제공되는 외부 링크를 통해 관련 자료를 확인하고 학습을 진행하세요."})]})})]})]})},re=({steps:s,activeStep:t,onStepChange:r})=>e.jsx("div",{className:"border-b border-gray-200 bg-white",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-4 sm:px-6 lg:px-8 overflow-x-auto","aria-label":"Tabs",children:s.map((l,n)=>{const a=l.id===t;return e.jsx("button",{onClick:()=>r(l.id),className:`
                tab-button
                ${a?"tab-button-active":"tab-button-inactive"}
                whitespace-nowrap py-4 px-1 font-medium text-sm focus:outline-none focus:ring-2 focus:ring-territory-primary focus:ring-offset-2
              `,role:"tab","aria-selected":a,"aria-controls":`tabpanel-${l.id}`,tabIndex:a?0:-1,onKeyDown:o=>{if(o.key==="ArrowRight"){const x=(n+1)%s.length;r(s[x].id)}else if(o.key==="ArrowLeft"){const x=(n-1+s.length)%s.length;r(s[x].id)}},children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"bg-gray-200 text-gray-700 rounded-full w-6 h-6 flex items-center justify-center text-xs font-medium",children:n+1}),e.jsx("span",{className:"hidden sm:inline",children:l.title})]})},l.id)})})});class y{static storeKeywords(t,r){try{const l={moduleId:t,keywords:r,timestamp:Date.now(),expiresAt:Date.now()+this.EXPIRY_DURATION},n=`${this.STORAGE_KEY_PREFIX}${t}`;localStorage.setItem(n,JSON.stringify(l))}catch(l){throw console.error("키워드 저장 실패:",l),new Error("키워드 저장에 실패했습니다.")}}static getKeywords(t){try{const r=`${this.STORAGE_KEY_PREFIX}${t}`,l=localStorage.getItem(r);if(!l)return null;const n=JSON.parse(l);return n.expiresAt&&Date.now()>n.expiresAt?(this.clearKeywords(t),null):n.keywords}catch(r){return console.error("키워드 로딩 실패:",r),null}}static clearKeywords(t){try{const r=`${this.STORAGE_KEY_PREFIX}${t}`;localStorage.removeItem(r)}catch(r){console.error("키워드 삭제 실패:",r)}}static validateKeywords(t){var l,n,a,o;const r={isValid:!0};return(l=t.keyword1)!=null&&l.trim()?t.keyword1.length>50&&(r.keyword1Error="50자 이내로 입력해주세요",r.isValid=!1):(r.keyword1Error="갈등 주체를 입력해주세요",r.isValid=!1),(n=t.keyword2)!=null&&n.trim()?t.keyword2.length>50&&(r.keyword2Error="50자 이내로 입력해주세요",r.isValid=!1):(r.keyword2Error="분쟁 배경을 입력해주세요",r.isValid=!1),(a=t.keyword3)!=null&&a.trim()?t.keyword3.length>50&&(r.keyword3Error="50자 이내로 입력해주세요",r.isValid=!1):(r.keyword3Error="해결 방안을 입력해주세요",r.isValid=!1),(o=t.keyword4)!=null&&o.trim()?t.keyword4.length>50&&(r.keyword4Error="50자 이내로 입력해주세요",r.isValid=!1):(r.keyword4Error="추가 내용을 입력해주세요",r.isValid=!1),r}static sanitizeKeyword(t){return t?t.trim().replace(/<[^>]*>/g,"").replace(/[<>&"']/g,r=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"})[r]||r):""}static replaceTemplatePlaceholders(t,r){if(!t||!r)return t;let l=t;return l=l.replace(/\[keyword1\]/g,r.keyword1||"[키워드1]"),l=l.replace(/\[keyword2\]/g,r.keyword2||"[키워드2]"),l=l.replace(/\[keyword3\]/g,r.keyword3||"[키워드3]"),l=l.replace(/\[keyword4\]/g,r.keyword4||"[키워드4]"),l}static hasAllKeywords(t){var r,l,n,a;return t?!!((r=t.keyword1)!=null&&r.trim()&&((l=t.keyword2)!=null&&l.trim())&&((n=t.keyword3)!=null&&n.trim())&&((a=t.keyword4)!=null&&a.trim())):!1}static createEmptyKeywords(){return{keyword1:"",keyword2:"",keyword3:"",keyword4:""}}}N(y,"STORAGE_KEY_PREFIX","territory-keywords-module-"),N(y,"EXPIRY_DURATION",24*60*60*1e3);const te=({onSubmit:s,initialKeywords:t,isLoading:r=!1})=>{const[l,n]=m.useState(t||y.createEmptyKeywords()),[a,o]=m.useState({isValid:!0}),[x,h]=m.useState(!1);m.useEffect(()=>{t&&n(t)},[t]);const i=(u,p)=>{const j=y.sanitizeKeyword(p);n(w=>({...w,[u]:j})),a[`${u}Error`]&&o(w=>({...w,[`${u}Error`]:void 0,generalError:void 0}))},g=async u=>{if(u.preventDefault(),!(x||r)){h(!0);try{const p=y.validateKeywords(l);if(o(p),!p.isValid){h(!1);return}await s(l)}catch(p){console.error("키워드 제출 실패:",p),o(j=>({...j,generalError:"키워드 저장에 실패했습니다. 다시 시도해주세요."}))}finally{h(!1)}}},b=()=>{n(y.createEmptyKeywords()),o({isValid:!0})},d=x||r;return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"캠페인 노래 만들기를 위한 핵심 정보를 입력하세요"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"각 항목에 적절한 키워드를 넣어주시면 다음 단계에서 자동으로 활용됩니다."})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"keyword1",className:"block text-sm font-medium text-gray-700 mb-2",children:["갈등 주체 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"keyword1",type:"text",value:l.keyword1,onChange:u=>i("keyword1",u.target.value),disabled:d,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${a.keyword1Error?"border-red-500 bg-red-50":"border-gray-300"} ${d?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"예: 독도, 쿠릴열도, 센카쿠열도 등",maxLength:50,"aria-describedby":a.keyword1Error?"keyword1-error":void 0}),a.keyword1Error&&e.jsx("p",{id:"keyword1-error",className:"mt-1 text-sm text-red-600",role:"alert",children:a.keyword1Error})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"keyword2",className:"block text-sm font-medium text-gray-700 mb-2",children:["분쟁 배경 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"keyword2",type:"text",value:l.keyword2,onChange:u=>i("keyword2",u.target.value),disabled:d,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${a.keyword2Error?"border-red-500 bg-red-50":"border-gray-300"} ${d?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"예: 역사적 주권, 자원 개발권, 영해 경계 등",maxLength:50,"aria-describedby":a.keyword2Error?"keyword2-error":void 0}),a.keyword2Error&&e.jsx("p",{id:"keyword2-error",className:"mt-1 text-sm text-red-600",role:"alert",children:a.keyword2Error})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"keyword3",className:"block text-sm font-medium text-gray-700 mb-2",children:["해결 방안 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"keyword3",type:"text",value:l.keyword3,onChange:u=>i("keyword3",u.target.value),disabled:d,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${a.keyword3Error?"border-red-500 bg-red-50":"border-gray-300"} ${d?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"예: 국제법 적용, 평화적 협상, 공동 개발 등",maxLength:50,"aria-describedby":a.keyword3Error?"keyword3-error":void 0}),a.keyword3Error&&e.jsx("p",{id:"keyword3-error",className:"mt-1 text-sm text-red-600",role:"alert",children:a.keyword3Error})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"keyword4",className:"block text-sm font-medium text-gray-700 mb-2",children:["추가 내용 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"keyword4",type:"text",value:l.keyword4,onChange:u=>i("keyword4",u.target.value),disabled:d,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${a.keyword4Error?"border-red-500 bg-red-50":"border-gray-300"} ${d?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"예: 평화적 해결이 중요하다, 상호 이해가 필요하다 등",maxLength:50,"aria-describedby":a.keyword4Error?"keyword4-error":void 0}),a.keyword4Error&&e.jsx("p",{id:"keyword4-error",className:"mt-1 text-sm text-red-600",role:"alert",children:a.keyword4Error})]}),a.generalError&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",role:"alert",children:e.jsx("p",{className:"text-sm text-red-600",children:a.generalError})}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:d,className:`flex-1 py-3 px-6 rounded-lg font-medium transition-all ${d?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:ring-4 focus:ring-blue-200"}`,children:x?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"적용 중..."]}):"키워드 적용하기"}),e.jsx("button",{type:"button",onClick:b,disabled:d,className:`px-6 py-3 rounded-lg font-medium border transition-all ${d?"border-gray-300 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-gray-200"}`,children:"초기화"})]})]}),y.hasAllKeywords(l)&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"미리보기"}),e.jsx("p",{className:"text-sm text-blue-700",children:y.replaceTemplatePlaceholders("영토 분쟁을 사례로 캠페인 노래를 만들거야. 이 사례는 [keyword1]이/가 갈등을 겪고 있고, [keyword2]이/가 핵심적인 분쟁 배경이야. 해결 방안으로는 [keyword3]이/가 필요해. [keyword4]",l)})]})]})},se=({step:s,keywords:t,onExternalLinkClick:r})=>{const l=s.templateContent?y.replaceTemplatePlaceholders(s.templateContent,t):s.content,n=y.hasAllKeywords(t);return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[!n&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"키워드를 입력해주세요"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"1단계에서 키워드를 먼저 입력하시면 개인화된 콘텐츠를 확인할 수 있습니다."})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"학습 내용"}),e.jsx("div",{className:"bg-gray-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:l})})})]}),n&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-3",children:"적용된 키워드"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-100 px-2 py-1 rounded mr-2",children:"갈등 주체"}),e.jsx("span",{className:"text-sm text-blue-800",children:t.keyword1})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-100 px-2 py-1 rounded mr-2",children:"분쟁 배경"}),e.jsx("span",{className:"text-sm text-blue-800",children:t.keyword2})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-100 px-2 py-1 rounded mr-2",children:"해결 방안"}),e.jsx("span",{className:"text-sm text-blue-800",children:t.keyword3})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-100 px-2 py-1 rounded mr-2",children:"추가 내용"}),e.jsx("span",{className:"text-sm text-blue-800",children:t.keyword4})]})]})]}),s.externalLink&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-3",children:"추가 자료"}),e.jsxs("button",{onClick:()=>r(s.externalLink.url),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors focus:ring-4 focus:ring-blue-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),s.externalLink.label,s.externalLink.openInNewTab&&e.jsxs("svg",{className:"w-3 h-3 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e.jsx("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"키워드 수정이 필요하신가요?"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"1단계로 돌아가서 키워드를 수정할 수 있습니다."})]}),e.jsx("button",{onClick:()=>{const a=new CustomEvent("navigateToKeywordInput");window.dispatchEvent(a)},className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-white transition-colors focus:ring-2 focus:ring-gray-200",children:"키워드 수정하기"})]})})]})},ae=({step:s,onExternalLinkClick:t,moduleId:r,keywords:l,onKeywordSubmit:n})=>{const a=s.isKeywordInput&&r==="1",o=s.useKeywordTemplate&&r==="1";if(a&&n)return e.jsx("div",{className:"bg-white p-6 lg:p-8",role:"tabpanel",id:`tabpanel-${s.id}`,"aria-labelledby":`tab-${s.id}`,children:e.jsx(te,{onSubmit:n,initialKeywords:l})});if(o&&l)return e.jsx("div",{className:"bg-white p-6 lg:p-8",role:"tabpanel",id:`tabpanel-${s.id}`,"aria-labelledby":`tab-${s.id}`,children:e.jsx(se,{step:s,keywords:l,onExternalLinkClick:t})});const x=()=>{s.externalLink&&t(s.externalLink.url)};return e.jsx("div",{className:"bg-white p-6 lg:p-8",role:"tabpanel",id:`tabpanel-${s.id}`,"aria-labelledby":`tab-${s.id}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-lg text-gray-600",children:s.description})]}),e.jsx("div",{className:"prose prose-lg max-w-none mb-8",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"학습 내용"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:s.content})]})}),s.externalLink&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"외부 자료 링크"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"아래 버튼을 클릭하여 관련 자료를 확인하고 학습을 진행하세요."}),e.jsxs("button",{onClick:x,className:"external-link-button",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),e.jsx("span",{children:s.externalLink.label})]})]}),s.editableContent&&e.jsx("div",{className:"mt-8 bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"수정 가능한 콘텐츠"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"이 콘텐츠는 수정할 수 있습니다. 필요에 따라 내용을 업데이트하세요."})]})]})})]})})},le=()=>{const{moduleId:s}=V(),t=I(),[r,l]=m.useState(null),[n,a]=m.useState(""),[o,x]=m.useState(!0),[h,i]=m.useState(null),[g,b]=m.useState(null),d=s==="1";m.useEffect(()=>{(async()=>{if(!s){i("모듈 ID가 제공되지 않았습니다."),x(!1);return}try{x(!0);const f=await A.loadModuleData(s);if(l(f),f.steps.length>0&&a(f.steps[0].id),d){const S=y.getKeywords(s);S&&b(S)}}catch(f){i(f instanceof Error?f.message:"모듈을 불러오는 중 오류가 발생했습니다.")}finally{x(!1)}})()},[s,d]),m.useEffect(()=>{const c=()=>{d&&r&&r.steps.length>0&&a(r.steps[0].id)};return window.addEventListener("navigateToKeywordInput",c),()=>{window.removeEventListener("navigateToKeywordInput",c)}},[d,r]);const u=async c=>{if(!(!s||!d))try{y.storeKeywords(s,c),b(c),r&&r.steps.length>1&&setTimeout(()=>{a(r.steps[1].id)},500)}catch(f){console.error("키워드 저장 실패:",f)}},p=c=>{a(c),window.location.hash=c},j=c=>{s&&($.trackLinkClick(s,n,c),$.openExternalLink(c,!0))},w=()=>{t("/")};if(o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-territory-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"모듈을 불러오는 중..."})]})});if(h||!r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-xl mb-4",children:"모듈을 찾을 수 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-6",children:h}),e.jsx("button",{onClick:w,className:"bg-territory-primary text-white px-6 py-2 rounded-lg hover:bg-territory-secondary transition-colors",children:"홈으로 돌아가기"})]})});const L=r.steps.find(c=>c.id===n);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:w,className:"flex items-center text-territory-primary hover:text-territory-secondary transition-colors mb-2",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"홈으로 돌아가기"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.title}),e.jsx("p",{className:"text-gray-600 mt-1",children:r.description})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[r.steps.length,"개 단계"]})]})})}),e.jsx(re,{steps:r.steps,activeStep:n,onStepChange:p}),L&&e.jsx(ae,{step:L,onExternalLinkClick:j,moduleId:s,keywords:g||void 0,onKeywordSubmit:d?u:void 0}),e.jsx("div",{className:"fixed bottom-4 right-4 bg-white rounded-full shadow-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"진행률"}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-territory-primary h-2 rounded-full transition-all duration-300",style:{width:`${(r.steps.findIndex(c=>c.id===n)+1)/r.steps.length*100}%`}})}),e.jsxs("span",{className:"text-territory-primary font-medium",children:[r.steps.findIndex(c=>c.id===n)+1,"/",r.steps.length]})]})})]})},ne=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl font-bold text-gray-400 mb-4",children:"404"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"페이지를 찾을 수 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"여기를 수정하세요 - 요청하신 페이지가 존재하지 않습니다."}),e.jsx("a",{href:"/",className:"bg-territory-primary text-white px-6 py-2 rounded-lg hover:bg-territory-secondary transition-colors inline-block",children:"홈으로 돌아가기"})]})}),oe=()=>e.jsx(D,{children:e.jsx("div",{className:"App",children:e.jsxs(B,{children:[e.jsx(k,{path:"/",element:e.jsx(ee,{})}),e.jsx(k,{path:"/module/:moduleId",element:e.jsx(le,{})}),e.jsx(k,{path:"*",element:e.jsx(ne,{})})]})})});E.createRoot(document.getElementById("root")).render(e.jsx(F.StrictMode,{children:e.jsx(oe,{})}));export{C as _};
